{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"./nativeInterface","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":258},"end":{"line":11,"column":48,"index":306}}],"key":"5p+aTJeUGezrl/VEo3WLpvgOze4=","exportNames":["*"],"imports":1}},{"name":"./internetReachability","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":307},"end":{"line":12,"column":58,"index":365}}],"key":"h5VfkDXWiN5EYd8A3EEygB1vP3Q=","exportNames":["*"],"imports":1}},{"name":"./privateTypes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":400},"end":{"line":14,"column":47,"index":447}}],"key":"8BvuxiTUsGHSowX5GFNP+ePi44c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return State;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _nativeInterface = require(_dependencyMap[3], \"./nativeInterface\");\n  var NativeInterface = _interopDefault(_nativeInterface);\n  var _internetReachability = require(_dependencyMap[4], \"./internetReachability\");\n  var InternetReachability = _interopDefault(_internetReachability);\n  var _privateTypes = require(_dependencyMap[5], \"./privateTypes\");\n  var PrivateTypes = _interopNamespace(_privateTypes);\n  /**\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   */\n  var State = /*#__PURE__*/(0, _createClass.default)(function State(configuration) {\n    var _this = this;\n    (0, _classCallCheck.default)(this, State);\n    this._nativeEventSubscription = null;\n    this._subscriptions = new Set();\n    this._latestState = null;\n    this._handleNativeStateUpdate = function (state) {\n      // Update the internet reachability module\n      _this._internetReachability.update(state);\n\n      // Convert the state from native to JS shape\n      var convertedState = _this._convertState(state);\n\n      // Update the listeners\n      _this._latestState = convertedState;\n      _this._subscriptions.forEach(function (handler) {\n        return handler(convertedState);\n      });\n    };\n    this._handleInternetReachabilityUpdate = function (isInternetReachable) {\n      if (!_this._latestState) {\n        return;\n      }\n      var nextState = Object.assign({}, _this._latestState, {\n        isInternetReachable: isInternetReachable\n      });\n      _this._latestState = nextState;\n      _this._subscriptions.forEach(function (handler) {\n        return handler(nextState);\n      });\n    };\n    this._fetchCurrentState = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (requestedInterface) {\n        var state = yield NativeInterface.default.getCurrentState(requestedInterface);\n\n        // Update the internet reachability module\n        _this._internetReachability.update(state);\n        // Convert and store the new state\n        var convertedState = _this._convertState(state);\n        if (!requestedInterface) {\n          _this._latestState = convertedState;\n          _this._subscriptions.forEach(function (handler) {\n            return handler(convertedState);\n          });\n        }\n        return convertedState;\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    this._convertState = function (input) {\n      if (typeof input.isInternetReachable === 'boolean') {\n        return input;\n      } else {\n        return Object.assign({}, input, {\n          isInternetReachable: _this._internetReachability.currentState()\n        });\n      }\n    };\n    this.latest = function (requestedInterface) {\n      if (requestedInterface) {\n        return _this._fetchCurrentState(requestedInterface);\n      } else if (_this._latestState) {\n        return Promise.resolve(_this._latestState);\n      } else {\n        return _this._fetchCurrentState();\n      }\n    };\n    this.add = function (handler) {\n      // Add the subscription handler to our set\n      _this._subscriptions.add(handler);\n\n      // Send it the latest data we have\n      if (_this._latestState) {\n        handler(_this._latestState);\n      } else {\n        _this.latest().then(handler);\n      }\n    };\n    this.remove = function (handler) {\n      _this._subscriptions.delete(handler);\n    };\n    this.tearDown = function () {\n      if (_this._internetReachability) {\n        _this._internetReachability.tearDown();\n      }\n      if (_this._nativeEventSubscription) {\n        _this._nativeEventSubscription.remove();\n      }\n      _this._subscriptions.clear();\n    };\n    // Add the listener to the internet connectivity events\n    this._internetReachability = new InternetReachability.default(configuration, this._handleInternetReachabilityUpdate);\n\n    // Add the subscription to the native events\n    this._nativeEventSubscription = NativeInterface.default.eventEmitter.addListener(PrivateTypes.DEVICE_CONNECTIVITY_EVENT, this._handleNativeStateUpdate);\n\n    // Fetch the current state from the native module\n    this._fetchCurrentState();\n  });\n});","lineCount":154,"map":[[30,13,16,21,"State"],[30,18,16,26],[31,4,16,26],[32,2,16,26],[33,2,16,26],[33,6,16,26,"_babelRuntimeHelpersAsyncToGenerator"],[33,42,16,26],[33,45,16,26,"require"],[33,52,16,26],[33,53,16,26,"_dependencyMap"],[33,67,16,26],[34,2,16,26],[34,6,16,26,"_asyncToGenerator"],[34,23,16,26],[34,26,16,26,"_interopDefault"],[34,41,16,26],[34,42,16,26,"_babelRuntimeHelpersAsyncToGenerator"],[34,78,16,26],[35,2,16,26],[35,6,16,26,"_babelRuntimeHelpersCreateClass"],[35,37,16,26],[35,40,16,26,"require"],[35,47,16,26],[35,48,16,26,"_dependencyMap"],[35,62,16,26],[36,2,16,26],[36,6,16,26,"_createClass"],[36,18,16,26],[36,21,16,26,"_interopDefault"],[36,36,16,26],[36,37,16,26,"_babelRuntimeHelpersCreateClass"],[36,68,16,26],[37,2,16,26],[37,6,16,26,"_babelRuntimeHelpersClassCallCheck"],[37,40,16,26],[37,43,16,26,"require"],[37,50,16,26],[37,51,16,26,"_dependencyMap"],[37,65,16,26],[38,2,16,26],[38,6,16,26,"_classCallCheck"],[38,21,16,26],[38,24,16,26,"_interopDefault"],[38,39,16,26],[38,40,16,26,"_babelRuntimeHelpersClassCallCheck"],[38,74,16,26],[39,2,11,0],[39,6,11,0,"_nativeInterface"],[39,22,11,0],[39,25,11,0,"require"],[39,32,11,0],[39,33,11,0,"_dependencyMap"],[39,47,11,0],[40,2,11,0],[40,6,11,0,"NativeInterface"],[40,21,11,0],[40,24,11,0,"_interopDefault"],[40,39,11,0],[40,40,11,0,"_nativeInterface"],[40,56,11,0],[41,2,12,0],[41,6,12,0,"_internetReachability"],[41,27,12,0],[41,30,12,0,"require"],[41,37,12,0],[41,38,12,0,"_dependencyMap"],[41,52,12,0],[42,2,12,0],[42,6,12,0,"InternetReachability"],[42,26,12,0],[42,29,12,0,"_interopDefault"],[42,44,12,0],[42,45,12,0,"_internetReachability"],[42,66,12,0],[43,2,14,0],[43,6,14,0,"_privateTypes"],[43,19,14,0],[43,22,14,0,"require"],[43,29,14,0],[43,30,14,0,"_dependencyMap"],[43,44,14,0],[44,2,14,0],[44,6,14,0,"PrivateTypes"],[44,18,14,0],[44,21,14,0,"_interopNamespace"],[44,38,14,0],[44,39,14,0,"_privateTypes"],[44,52,14,0],[45,2,1,0],[46,0,2,0],[47,0,3,0],[48,0,4,0],[49,0,5,0],[50,0,6,0],[51,0,7,0],[52,0,8,0],[53,2,1,0],[53,6,16,21,"State"],[53,11,16,26],[53,31,16,26,"_createClass"],[53,43,16,26],[53,44,16,26,"default"],[53,51,16,26],[53,53,22,2],[53,62,22,2,"State"],[53,68,22,14,"configuration"],[53,81,22,55],[53,83,22,57],[54,4,22,57],[54,8,22,57,"_this"],[54,13,22,57],[55,4,22,57],[55,8,22,57,"_classCallCheck"],[55,23,22,57],[55,24,22,57,"default"],[55,31,22,57],[55,39,22,57,"State"],[55,44,22,57],[56,4,22,57],[56,9,17,10,"_nativeEventSubscription"],[56,33,17,34],[56,36,17,69],[56,40,17,73],[57,4,17,73],[57,9,18,10,"_subscriptions"],[57,23,18,24],[57,26,18,27],[57,30,18,31,"Set"],[57,33,18,34],[57,34,18,63],[57,35,18,64],[58,4,18,64],[58,9,19,10,"_latestState"],[58,21,19,22],[58,24,19,52],[58,28,19,56],[59,4,19,56],[59,9,39,10,"_handleNativeStateUpdate"],[59,33,39,34],[59,36,39,37],[59,46,40,4,"state"],[59,51,40,48],[59,53,41,13],[60,6,42,4],[61,6,43,4,"_this"],[61,11,43,8],[61,12,43,9,"_internetReachability"],[61,33,43,30],[61,34,43,31,"update"],[61,40,43,37],[61,41,43,38,"state"],[61,46,43,43],[61,47,43,44],[63,6,45,4],[64,6,46,4],[64,10,46,10,"convertedState"],[64,24,46,24],[64,27,46,27,"_this"],[64,32,46,31],[64,33,46,32,"_convertState"],[64,46,46,45],[64,47,46,46,"state"],[64,52,46,51],[64,53,46,52],[66,6,48,4],[67,6,49,4,"_this"],[67,11,49,8],[67,12,49,9,"_latestState"],[67,24,49,21],[67,27,49,24,"convertedState"],[67,41,49,38],[68,6,50,4,"_this"],[68,11,50,8],[68,12,50,9,"_subscriptions"],[68,26,50,23],[68,27,50,24,"forEach"],[68,34,50,31],[68,35,50,32],[68,45,50,33,"handler"],[68,52,50,40],[69,8,50,40],[69,15,50,51,"handler"],[69,22,50,58],[69,23,50,59,"convertedState"],[69,37,50,73],[69,38,50,74],[70,6,50,74],[70,8,50,75],[71,4,51,2],[71,5,51,3],[72,4,51,3],[72,9,53,10,"_handleInternetReachabilityUpdate"],[72,42,53,43],[72,45,53,46],[72,55,54,4,"isInternetReachable"],[72,74,54,51],[72,76,55,13],[73,6,56,4],[73,10,56,8],[73,11,56,9,"_this"],[73,16,56,13],[73,17,56,14,"_latestState"],[73,29,56,26],[73,31,56,28],[74,8,57,6],[75,6,58,4],[76,6,60,4],[76,10,60,10,"nextState"],[76,19,60,19],[76,22,60,19,"Object"],[76,28,60,19],[76,29,60,19,"assign"],[76,35,60,19],[76,40,61,9,"_this"],[76,45,61,13],[76,46,61,14,"_latestState"],[76,58,61,26],[77,8,62,6,"isInternetReachable"],[77,27,62,25],[77,29,62,6,"isInternetReachable"],[78,6,62,25],[78,8,63,27],[79,6,64,4,"_this"],[79,11,64,8],[79,12,64,9,"_latestState"],[79,24,64,21],[79,27,64,24,"nextState"],[79,36,64,33],[80,6,65,4,"_this"],[80,11,65,8],[80,12,65,9,"_subscriptions"],[80,26,65,23],[80,27,65,24,"forEach"],[80,34,65,31],[80,35,65,32],[80,45,65,33,"handler"],[80,52,65,40],[81,8,65,40],[81,15,65,51,"handler"],[81,22,65,58],[81,23,65,59,"nextState"],[81,32,65,68],[81,33,65,69],[82,6,65,69],[82,8,65,70],[83,4,66,2],[83,5,66,3],[84,4,66,3],[84,9,68,9,"_fetchCurrentState"],[84,27,68,27],[85,6,68,27],[85,10,68,27,"_ref"],[85,14,68,27],[85,21,68,27,"_asyncToGenerator"],[85,38,68,27],[85,39,68,27,"default"],[85,46,68,27],[85,48,68,30],[85,59,69,4,"requestedInterface"],[85,77,69,31],[85,79,70,36],[86,8,71,4],[86,12,71,10,"state"],[86,17,71,15],[86,26,71,24,"NativeInterface"],[86,41,71,39],[86,42,71,39,"default"],[86,49,71,39],[86,50,71,40,"getCurrentState"],[86,65,71,55],[86,66,71,56,"requestedInterface"],[86,84,71,74],[86,85,71,75],[88,8,73,4],[89,8,74,4,"_this"],[89,13,74,8],[89,14,74,9,"_internetReachability"],[89,35,74,30],[89,36,74,31,"update"],[89,42,74,37],[89,43,74,38,"state"],[89,48,74,43],[89,49,74,44],[90,8,75,4],[91,8,76,4],[91,12,76,10,"convertedState"],[91,26,76,24],[91,29,76,27,"_this"],[91,34,76,31],[91,35,76,32,"_convertState"],[91,48,76,45],[91,49,76,46,"state"],[91,54,76,51],[91,55,76,52],[92,8,77,4],[92,12,77,8],[92,13,77,9,"requestedInterface"],[92,31,77,27],[92,33,77,29],[93,10,78,6,"_this"],[93,15,78,10],[93,16,78,11,"_latestState"],[93,28,78,23],[93,31,78,26,"convertedState"],[93,45,78,40],[94,10,79,6,"_this"],[94,15,79,10],[94,16,79,11,"_subscriptions"],[94,30,79,25],[94,31,79,26,"forEach"],[94,38,79,33],[94,39,79,34],[94,49,79,35,"handler"],[94,56,79,42],[95,12,79,42],[95,19,79,53,"handler"],[95,26,79,60],[95,27,79,61,"convertedState"],[95,41,79,75],[95,42,79,76],[96,10,79,76],[96,12,79,77],[97,8,80,4],[98,8,82,4],[98,15,82,11,"convertedState"],[98,29,82,25],[99,6,83,2],[99,7,83,3],[100,6,83,3],[100,23,83,3,"_x"],[100,25,83,3],[101,8,83,3],[101,15,83,3,"_ref"],[101,19,83,3],[101,20,83,3,"apply"],[101,25,83,3],[101,32,83,3,"arguments"],[101,41,83,3],[102,6,83,3],[103,4,83,3],[104,4,83,3],[104,9,85,10,"_convertState"],[104,22,85,23],[104,25,85,26],[104,35,86,4,"input"],[104,40,86,48],[104,42,87,27],[105,6,88,4],[105,10,88,8],[105,17,88,15,"input"],[105,22,88,20],[105,23,88,21,"isInternetReachable"],[105,42,88,40],[105,47,88,45],[105,56,88,54],[105,58,88,56],[106,8,89,6],[106,15,89,13,"input"],[106,20,89,18],[107,6,90,4],[107,7,90,5],[107,13,90,11],[108,8,91,6],[108,15,91,6,"Object"],[108,21,91,6],[108,22,91,6,"assign"],[108,28,91,6],[108,33,92,11,"input"],[108,38,92,16],[109,10,93,8,"isInternetReachable"],[109,29,93,27],[109,31,93,29,"_this"],[109,36,93,33],[109,37,93,34,"_internetReachability"],[109,58,93,55],[109,59,93,56,"currentState"],[109,71,93,68],[109,72,93,69],[110,8,93,70],[111,6,95,4],[112,4,96,2],[112,5,96,3],[113,4,96,3],[113,9,98,9,"latest"],[113,15,98,15],[113,18,98,18],[113,28,99,4,"requestedInterface"],[113,46,99,31],[113,48,100,36],[114,6,101,4],[114,10,101,8,"requestedInterface"],[114,28,101,26],[114,30,101,28],[115,8,102,6],[115,15,102,13,"_this"],[115,20,102,17],[115,21,102,18,"_fetchCurrentState"],[115,39,102,36],[115,40,102,37,"requestedInterface"],[115,58,102,55],[115,59,102,56],[116,6,103,4],[116,7,103,5],[116,13,103,11],[116,17,103,15,"_this"],[116,22,103,19],[116,23,103,20,"_latestState"],[116,35,103,32],[116,37,103,34],[117,8,104,6],[117,15,104,13,"Promise"],[117,22,104,20],[117,23,104,21,"resolve"],[117,30,104,28],[117,31,104,29,"_this"],[117,36,104,33],[117,37,104,34,"_latestState"],[117,49,104,46],[117,50,104,47],[118,6,105,4],[118,7,105,5],[118,13,105,11],[119,8,106,6],[119,15,106,13,"_this"],[119,20,106,17],[119,21,106,18,"_fetchCurrentState"],[119,39,106,36],[119,40,106,37],[119,41,106,38],[120,6,107,4],[121,4,108,2],[121,5,108,3],[122,4,108,3],[122,9,110,9,"add"],[122,12,110,12],[122,15,110,15],[122,25,110,16,"handler"],[122,32,110,51],[122,34,110,62],[123,6,111,4],[124,6,112,4,"_this"],[124,11,112,8],[124,12,112,9,"_subscriptions"],[124,26,112,23],[124,27,112,24,"add"],[124,30,112,27],[124,31,112,28,"handler"],[124,38,112,35],[124,39,112,36],[126,6,114,4],[127,6,115,4],[127,10,115,8,"_this"],[127,15,115,12],[127,16,115,13,"_latestState"],[127,28,115,25],[127,30,115,27],[128,8,116,6,"handler"],[128,15,116,13],[128,16,116,14,"_this"],[128,21,116,18],[128,22,116,19,"_latestState"],[128,34,116,31],[128,35,116,32],[129,6,117,4],[129,7,117,5],[129,13,117,11],[130,8,118,6,"_this"],[130,13,118,10],[130,14,118,11,"latest"],[130,20,118,17],[130,21,118,18],[130,22,118,19],[130,23,118,20,"then"],[130,27,118,24],[130,28,118,25,"handler"],[130,35,118,32],[130,36,118,33],[131,6,119,4],[132,4,120,2],[132,5,120,3],[133,4,120,3],[133,9,122,9,"remove"],[133,15,122,15],[133,18,122,18],[133,28,122,19,"handler"],[133,35,122,54],[133,37,122,65],[134,6,123,4,"_this"],[134,11,123,8],[134,12,123,9,"_subscriptions"],[134,26,123,23],[134,27,123,24,"delete"],[134,33,123,30],[134,34,123,31,"handler"],[134,41,123,38],[134,42,123,39],[135,4,124,2],[135,5,124,3],[136,4,124,3],[136,9,126,9,"tearDown"],[136,17,126,17],[136,20,126,20],[136,32,126,32],[137,6,127,4],[137,10,127,8,"_this"],[137,15,127,12],[137,16,127,13,"_internetReachability"],[137,37,127,34],[137,39,127,36],[138,8,128,6,"_this"],[138,13,128,10],[138,14,128,11,"_internetReachability"],[138,35,128,32],[138,36,128,33,"tearDown"],[138,44,128,41],[138,45,128,42],[138,46,128,43],[139,6,129,4],[140,6,131,4],[140,10,131,8,"_this"],[140,15,131,12],[140,16,131,13,"_nativeEventSubscription"],[140,40,131,37],[140,42,131,39],[141,8,132,6,"_this"],[141,13,132,10],[141,14,132,11,"_nativeEventSubscription"],[141,38,132,35],[141,39,132,36,"remove"],[141,45,132,42],[141,46,132,43],[141,47,132,44],[142,6,133,4],[143,6,135,4,"_this"],[143,11,135,8],[143,12,135,9,"_subscriptions"],[143,26,135,23],[143,27,135,24,"clear"],[143,32,135,29],[143,33,135,30],[143,34,135,31],[144,4,136,2],[144,5,136,3],[145,4,23,4],[146,4,24,4],[146,8,24,8],[146,9,24,9,"_internetReachability"],[146,30,24,30],[146,33,24,33],[146,37,24,37,"InternetReachability"],[146,57,24,57],[146,58,24,57,"default"],[146,65,24,57],[146,66,25,6,"configuration"],[146,79,25,19],[146,81,26,6],[146,85,26,10],[146,86,26,11,"_handleInternetReachabilityUpdate"],[146,119,27,4],[146,120,27,5],[148,4,29,4],[149,4,30,4],[149,8,30,8],[149,9,30,9,"_nativeEventSubscription"],[149,33,30,33],[149,36,30,36,"NativeInterface"],[149,51,30,51],[149,52,30,51,"default"],[149,59,30,51],[149,60,30,52,"eventEmitter"],[149,72,30,64],[149,73,30,65,"addListener"],[149,84,30,76],[149,85,31,6,"PrivateTypes"],[149,97,31,18],[149,98,31,19,"DEVICE_CONNECTIVITY_EVENT"],[149,123,31,44],[149,125,32,6],[149,129,32,10],[149,130,32,11,"_handleNativeStateUpdate"],[149,154,33,4],[149,155,33,5],[151,4,35,4],[152,4,36,4],[152,8,36,8],[152,9,36,9,"_fetchCurrentState"],[152,27,36,27],[152,28,36,28],[152,29,36,29],[153,2,37,2],[153,3,37,3],[154,0,37,3],[154,3]],"functionMap":{"names":["<global>","State","State#constructor","State#_handleNativeStateUpdate","_subscriptions.forEach$argument_0","State#_handleInternetReachabilityUpdate","State#_fetchCurrentState","State#_convertState","State#latest","State#add","State#remove","State#tearDown"],"mappings":"AAA;eCe;ECM;GDe;qCEE;gCCW,0CD;GFC;8CIE;gCDY,qCC;GJC;8BKE;kCFW,0CE;GLI;0BME;GNW;kBOE;GPU;eQE;GRU;kBSE;GTE;oBUE;GVU;CDC"},"hasCjsExports":false},"type":"js/module"}]}